# FlowFuse Website - Astro Build Configuration

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    Content-Security-Policy = "frame-ancestors 'none';"

# Domain redirects (preserve existing)
[[redirects]]
from = "http://flowforge.com/*"
to = "http://flowfuse.com/:splat"
status = 301
force = true

[[redirects]]
from = "https://flowforge.com/*"
to = "https://flowfuse.com/:splat"
status = 301
force = true

[[redirects]]
from = "http://www.flowforge.com/*"
to = "http://flowfuse.com/:splat"
status = 301
force = true

[[redirects]]
from = "https://www.flowforge.com/*"
to = "https://flowfuse.com/:splat"
status = 301
force = true

[[redirects]]
from = "http://flowfuze.com/*"
to = "http://flowfuse.com/:splat"
status = 301
force = true

[[redirects]]
from = "https://flowfuze.com/*"
to = "https://flowfuse.com/:splat"
status = 301
force = true

[[redirects]]
from = "http://www.flowfuze.com/*"
to = "http://flowfuse.com/:splat"
status = 301
force = true

[[redirects]]
from = "https://www.flowfuze.com/*"
to = "https://flowfuse.com/:splat"
status = 301
force = true

[[redirects]]
from = "https://flowfuse.io/*"
to = "https://flowfuse.com/:splat"
status = 301
force = true

[dev]
port = 8080
framework = "#static"
command = "bun run dev"
autoLaunch = false

[build]
command = "bun run build"
publish = "dist"

[[plugins]]
package = "@algolia/netlify-plugin-crawler"
  [plugins.inputs]
  branches = ['live']
  template = "hierarchical"

[[plugins]]
package = "netlify-plugin-cache"
  [plugins.inputs]
  paths = [
    "node_modules/.astro", # Astro cache
    ".cache" # Remote asset cache
  ]
